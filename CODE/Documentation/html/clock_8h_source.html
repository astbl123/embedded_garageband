<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Embedded GarageBand: clock.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Picture1.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Embedded GarageBand&#160;<span id="projectnumber">1.0</span></div>
   <div id="projectbrief">The project is aimed at developing an embedded Garage band that uses an 8051 microcontroller. The user can access the instruments via the touchscreen+graphics LCD or use the instruments that we have constructed. In this document we will cover the complete detail of the project including its construction, hardware design, software design and debugging.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('clock_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">clock.h</div>  </div>
</div>
<div class="contents">
<a href="clock_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">    Filename: clock.h</span>
<a name="l00003"></a>00003 <span class="comment"></span>
<a name="l00004"></a>00004 <span class="comment">    This file defines interface for clock related functions for the</span>
<a name="l00005"></a>00005 <span class="comment">    CC243x family of RF system-on-chips from Texas Instruments.</span>
<a name="l00006"></a>00006 <span class="comment">        </span>
<a name="l00007"></a>00007 <span class="comment">    Code leveraged from Texas Instruments, Inc.</span>
<a name="l00008"></a>00008 <span class="comment">        Modified by:    Niket Shah</span>
<a name="l00009"></a>00009 <span class="comment">                                        Maulik Kapuria</span>
<a name="l00010"></a>00010 <span class="comment">                                        Vishal Verma</span>
<a name="l00011"></a>00011 <span class="comment">******************************************************************************/</span>
<a name="l00012"></a>00012 <span class="preprocessor">#ifndef _CLOCK_H</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span><span class="preprocessor">#define _CLOCK_H</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="comment">/*******************************************************************************</span>
<a name="l00017"></a>00017 <span class="comment"> * INCLUDES</span>
<a name="l00018"></a>00018 <span class="comment"> */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="comment">//#include &quot;../Project.h&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="hal__types_8h.html">hal_types.h</a>&quot;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="comment">/*******************************************************************************</span>
<a name="l00027"></a>00027 <span class="comment"> * CONSTANTS</span>
<a name="l00028"></a>00028 <span class="comment"> */</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="comment">/* SEE DATA SHEET FOR DETAILS ABOUT THE FOLLOWING BIT MASKS */</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="comment">// Parameters for cc2430ClockSetMainSrc</span>
<a name="l00033"></a><a class="code" href="clock_8h.html#abafdec51e2e5171851189241ee0b8704">00033</a> <span class="preprocessor">#define CLOCK_SRC_XOSC      0  // High speed Crystal Oscillator Control</span>
<a name="l00034"></a><a class="code" href="clock_8h.html#a20b8f64b8e283d425b0b3620d357843c">00034</a> <span class="preprocessor"></span><span class="preprocessor">#define CLOCK_SRC_HFRC      1  // Low power RC Oscillator</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>
<a name="l00036"></a>00036 <span class="comment">// Parameters for cc2430ClockSelect32k</span>
<a name="l00037"></a><a class="code" href="clock_8h.html#abdb6051f986a8d39b8e2ec870f7bb3fd">00037</a> <span class="preprocessor">#define CLOCK_32K_XTAL      0  // 32.768 Hz crystal oscillator</span>
<a name="l00038"></a><a class="code" href="clock_8h.html#ae0a75bed0cabb283e21a284a47acd73e">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define CLOCK_32K_RCOSC     1  // 32 kHz RC oscillator</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00040"></a>00040 <span class="comment">// Bit masks to check CLKCON register</span>
<a name="l00041"></a><a class="code" href="clock_8h.html#a17f58ae6bd6de30f9117b16bb9ebf48f">00041</a> <span class="preprocessor">#define CLKCON_OSC32K_BM    0x80  // bit mask, for the slow 32k clock oscillator</span>
<a name="l00042"></a><a class="code" href="clock_8h.html#aadba279b6030f70553cd426ffcab1d48">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define CLKCON_OSC_BM       0x40  // bit mask, for the system clock oscillator</span>
<a name="l00043"></a><a class="code" href="clock_8h.html#a917c13d9228de7c67e3f0f47f4f0aaee">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define CLKCON_TICKSPD_BM   0x38  // bit mask, for timer ticks output setting</span>
<a name="l00044"></a><a class="code" href="clock_8h.html#a665c00c5318ac647938f350effe7cd15">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define CLKCON_CLKSPD_BM    0x01  // bit maks, for the clock speed</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a><a class="code" href="clock_8h.html#a98ea8cbab1d8fb2a492924132ca8a682">00046</a> <span class="preprocessor">#define TICKSPD_DIV_1       (0x00 &lt;&lt; 3)</span>
<a name="l00047"></a><a class="code" href="clock_8h.html#a89a2bc9cec285556c695bc6c2ec47b1a">00047</a> <span class="preprocessor"></span><span class="preprocessor">#define TICKSPD_DIV_2       (0x01 &lt;&lt; 3)</span>
<a name="l00048"></a><a class="code" href="clock_8h.html#ad6c02d99aed9404ddba5cca1b22aa698">00048</a> <span class="preprocessor"></span><span class="preprocessor">#define TICKSPD_DIV_4       (0x02 &lt;&lt; 3)</span>
<a name="l00049"></a><a class="code" href="clock_8h.html#a9251752a96edef2093902a60470b95b8">00049</a> <span class="preprocessor"></span><span class="preprocessor">#define TICKSPD_DIV_8       (0x03 &lt;&lt; 3)</span>
<a name="l00050"></a><a class="code" href="clock_8h.html#aedbf47f8652737c7ad6b7db25013338f">00050</a> <span class="preprocessor"></span><span class="preprocessor">#define TICKSPD_DIV_16      (0x04 &lt;&lt; 3)</span>
<a name="l00051"></a><a class="code" href="clock_8h.html#ae824d0d8a0c834b057e9b53881b0aa53">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define TICKSPD_DIV_32      (0x05 &lt;&lt; 3)</span>
<a name="l00052"></a><a class="code" href="clock_8h.html#ab6781fe436cf5c052b8c6df56b488f13">00052</a> <span class="preprocessor"></span><span class="preprocessor">#define TICKSPD_DIV_64      (0x06 &lt;&lt; 3)</span>
<a name="l00053"></a><a class="code" href="clock_8h.html#a53bb6600d6778ecef232554bd83d5385">00053</a> <span class="preprocessor"></span><span class="preprocessor">#define TICKSPD_DIV_128     (0x07 &lt;&lt; 3)</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>
<a name="l00055"></a>00055 <span class="comment">// Bit masks to check SLEEP register</span>
<a name="l00056"></a><a class="code" href="clock_8h.html#a94aa0a4aae3e815c4e8cbb76aada0b65">00056</a> <span class="preprocessor">#define SLEEP_XOSC_STB_BM   0x40  // bit mask, check the stability of XOSC</span>
<a name="l00057"></a><a class="code" href="clock_8h.html#a57af39421560d166fc8a122aa4d3a554">00057</a> <span class="preprocessor"></span><span class="preprocessor">#define SLEEP_HFRC_STB_BM   0x20  // bit maks, check the stability of the High-frequency RC oscillator</span>
<a name="l00058"></a><a class="code" href="clock_8h.html#af7dc5161b2f907cc6e39fa27278b993b">00058</a> <span class="preprocessor"></span><span class="preprocessor">#define SLEEP_OSC_PD_BM     0x04  // bit mask, power down system clock oscillator(s)</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="comment">/*******************************************************************************</span>
<a name="l00062"></a>00062 <span class="comment"> * MACROS</span>
<a name="l00063"></a>00063 <span class="comment"> */</span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="comment">// Macro for checking status of the high frequency RC oscillator.</span>
<a name="l00066"></a><a class="code" href="clock_8h.html#acbeef67cab154d3ad496ed3cc0d199da">00066</a> <span class="preprocessor">#define CC2430_IS_HFRC_STABLE(x)    (SLEEP &amp; SLEEP_HFRC_STB_BM)</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00068"></a>00068 <span class="comment">// Macro for checking status of the crystal oscillator</span>
<a name="l00069"></a><a class="code" href="clock_8h.html#a32fddb82f512731e17aa4929b362ca8e">00069</a> <span class="preprocessor">#define CC2430_IS_XOSC_STABLE(x)    (SLEEP &amp; SLEEP_XOSC_STB_BM)</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span>
<a name="l00071"></a>00071 <span class="comment">// Macro for getting the clock division factor</span>
<a name="l00072"></a><a class="code" href="clock_8h.html#ac300d48c222df158263ad60a142254f4">00072</a> <span class="preprocessor">#define CC2430_GET_CLKSPD(x)        (CLKCON &amp; CLKCON_CLKSPD_BM)</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="comment">// Macro for getting the timer tick division factor.</span>
<a name="l00076"></a><a class="code" href="clock_8h.html#add42dfce6b2c9681a3cad30198de1868">00076</a> <span class="preprocessor">#define CC2430_GET_TICKSPD(x)       ((CLKCON &amp; CLKCON_TICKSPD_BM) &gt;&gt; 3)</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a>00078 <span class="comment">// Macro for setting the clock division factor, x value from 0b000 to 0b111</span>
<a name="l00079"></a><a class="code" href="clock_8h.html#af26a3c5bee12f3f4551f03a9784fa036">00079</a> <span class="preprocessor">#define CC2430_SET_TICKSPD(x)        st( CLKCON = ((((x) &lt;&lt; 3) &amp; 0x38)  \</span>
<a name="l00080"></a>00080 <span class="preprocessor">                                                    | (CLKCON &amp; 0xC7)); \</span>
<a name="l00081"></a>00081 <span class="preprocessor">                )</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>
<a name="l00083"></a>00083 <span class="comment">// Macro for setting the timer tick division factor, x value from 0b000 to 0b111</span>
<a name="l00084"></a><a class="code" href="clock_8h.html#aa1ff41e49a0ef317cbafdd43ba94cc10">00084</a> <span class="preprocessor">#define CC2430_SET_CLKSPD(x)         st( CLKCON = (((x) &amp; 0x07)         \</span>
<a name="l00085"></a>00085 <span class="preprocessor">                                                    | (CLKCON &amp; 0xF8)); \</span>
<a name="l00086"></a>00086 <span class="preprocessor">                                                                         )</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">/*******************************************************************************</span>
<a name="l00091"></a>00091 <span class="comment"> * FUNCTIONS</span>
<a name="l00092"></a>00092 <span class="comment"> */</span>
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="keywordtype">void</span> <a class="code" href="clock_8c.html#a52eecef8b09d07f33df78985f795efb8">clockSetMainSrc</a>(<a class="code" href="hal__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> source);
<a name="l00095"></a>00095 <span class="keywordtype">void</span> <a class="code" href="clock_8c.html#a6d6e12526c1f5c1eedeab49d1103a1fc">clockSelect32k</a>(<a class="code" href="hal__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> source);
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="clock_8h.html">clock.h</a>      </li>
      <li class="footer">Generated on Sat Apr 30 2011 08:30:24 for Embedded GarageBand by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
